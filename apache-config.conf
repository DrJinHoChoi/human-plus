# HumanPlus 웹사이트 아파치 설정
<VirtualHost *:80>
    ServerName humanplus.example.com
    ServerAlias www.humanplus.example.com
    
    # 관리자 이메일
    ServerAdmin admin@example.com
    
    # 문서 루트 설정 (아파치가 실제 파일을 찾을 경로)
    DocumentRoot /var/www/humanplus
    
    # 로그 파일 위치
    ErrorLog ${APACHE_LOG_DIR}/humanplus-error.log
    CustomLog ${APACHE_LOG_DIR}/humanplus-access.log combined
    
    # Node.js 애플리케이션을 위한 프록시 설정
    <Location /api>
        ProxyPass http://localhost:3000/api
        ProxyPassReverse http://localhost:3000/api
    </Location>
    
    # 정적 파일 설정
    <Directory /var/www/humanplus>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    
    # HTTP 헤더 설정
    <IfModule mod_headers.c>
        Header always set X-Frame-Options "SAMEORIGIN"
        Header always set X-XSS-Protection "1; mode=block"
        Header always set X-Content-Type-Options "nosniff"
    </IfModule>
    
    # 캐싱 설정
    <IfModule mod_expires.c>
        ExpiresActive On
        ExpiresByType image/jpg "access plus 1 year"
        ExpiresByType image/jpeg "access plus 1 year"
        ExpiresByType image/png "access plus 1 year"
        ExpiresByType text/css "access plus 1 month"
        ExpiresByType text/javascript "access plus 1 month"
        ExpiresByType application/javascript "access plus 1 month"
    </IfModule>
</VirtualHost>

# HTTPS 리디렉션 및 설정 (SSL 인증서 설치 후 활성화)
#<VirtualHost *:80>
#    ServerName humanplus.example.com
#    ServerAlias www.humanplus.example.com
#    Redirect permanent / https://humanplus.example.com/
#</VirtualHost>
#
#<VirtualHost *:443>
#    ServerName humanplus.example.com
#    ServerAlias www.humanplus.example.com
#    
#    DocumentRoot /var/www/humanplus
#    
#    ErrorLog ${APACHE_LOG_DIR}/humanplus-error.log
#    CustomLog ${APACHE_LOG_DIR}/humanplus-access.log combined
#    
#    SSLEngine on
#    SSLCertificateFile /etc/ssl/certs/humanplus.crt
#    SSLCertificateKeyFile /etc/ssl/private/humanplus.key
#    
#    <Location /api>
#        ProxyPass http://localhost:3000/api
#        ProxyPassReverse http://localhost:3000/api
#    </Location>
#    
#    <Directory /var/www/humanplus>
#        Options Indexes FollowSymLinks
#        AllowOverride All
#        Require all granted
#    </Directory>
#</VirtualHost> 